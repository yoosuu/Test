[{"uri":"/10_klaytn_installation/10_system_diagram/","title":"Network Diagram","tags":[],"description":"","content":"\nCCN Diagram\nCCN consists of one CN node and two PN nodes. Network architecture\nFull mesh connection should be made between CNs. So, You need to configure the firewall to allow ingress between nodes. For communication and multichannel between CN, allow TCP 32323-32324 and UDP 32323 to your firewall ingress rule. We will share CN node IPs for Pre-cypress configuration separately. You can see the Klaytn Design more detailed on the page below.\nhttps://docs.klaytn.foundation/klaytn/design/consensus-mechanism If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"},{"uri":"/20_klaytn_configuration/10_configuration/","title":"Klaytn Configuration","tags":[],"description":"","content":"\nThe CN configuration is to create a data directory and set up several values in the configuration file.\nCreate the data/log directory. Install node key. Configure the CN(PN) with kcnd.conf (kpnd.conf). 1. Data,log Directory Creation Considering the fact that the size of Klaytn blockchain data is always increased, it is recommended to use a big enough storage. You may need to create the directory on your desired path.\n1) CN $ mkdir -p /var/kcnd/data $ mkdir -p /var/kcnd/log\n2) PN $ mkdir -p /var/kpnd/data $ mkdir -p /var/kpnd/log\n2. Install Node key In order to operate a node, a nodekey is required. The KCN(KPN) binary will create a new one for you if you do not have it. If you have one, you need to put your nodekey into the data directory.\n$ mkdir -p /var/kcnd/data/nodekey $ cp nodekey /var/kcnd/data Set the PN node in the same way.\n3. Update the Configuration File Configuration File Location:\nFor the archive distribution, the config directory location defaults to $INSTALL_PATH/kcn-linux-amd64/conf/. For the package distribution, the config directory defaults to /etc/kcnd/conf/. 1) Add configuration for CN NETWORK=\u0026#34;\u0026#34; NETWORK_ID=7207 DATA_DIR=/var/kcnd/data # path where you created in #1 LOG_DIR=/var/kcnd/logs # path where you created in #1 NO_DISCOVER=0 BOOTNODES=\u0026#34;kni://8e1881cdca97f52a76c6d2683db030f51a34ffc039476b4ed5bc5c757de1b5ce48fea1e53aa182a6ac2b076460881d50d3b57461d1cf36fae777e992893ad485@52.199.8.244:32323?discport=32323\u0026amp;ntype=bn\u0026#34; REWARDBASE=\u0026#34;\u0026#34; # ADD YOUR REWARDS ADDRESS GNNERATED BY KEYTOOL 2) Add configuration for PN NETWORK=\u0026#34;\u0026#34; NETWORK_ID=7207 DATA_DIR=/var/kpnd/data # path where you created in #1 LOG_DIR=/var/kpnd/logs # path where you created in #1 NO_DISCOVER=1 BOOTNODES=\u0026#34;\u0026#34; You can check the more information for installation on the page below.\nCN : https://docs.klaytn.foundation/node/core-cell/installation-guide/consensus-node-setup/configuration PN : https://docs.klaytn.foundation/node/core-cell/installation-guide/proxy-node-setup/configuration If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"},{"uri":"/10_klaytn_installation/","title":"Klaytn Installation","tags":[],"description":"","content":"Chapter 1 Klaytn Installation Package installation for node configuration are covered in this chapter. Please click the next button \u0026gt; on the right side of this page.\n"},{"uri":"/40_start_the_services/10_start_the_services/","title":"Start the services","tags":[],"description":"","content":"\n1. Start the Klaytn service, if it is running. For CN, $ sudo systemctl status kcnd $ sudo systemctl start kcnd $ sudo systemctl status kcnd For PN, $ sudo systemctl status kpnd $ sudo systemctl start kpnd $ sudo systemctl status kpnd If the services are not installed from yum, you can start the service like below, $ sudo \u0026lt;installation_path\u0026gt;/kcnd status $ sudo \u0026lt;installation_path\u0026gt;/kcnd start $ sudo \u0026lt;installation_path\u0026gt;/kcnd status 2. Start the Telegraf service, if it is running. For both CN and PN, $ sudo systemctl status telegraf $ sudo systemctl start telegraf $ sudo systemctl status telegraf If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"},{"uri":"/30_monitoring_setup/10_telegraf_installation/","title":"Telegraf Installation","tags":[],"description":"","content":"\n1. Telegraf Installation Telegraf Installation Guide (Amazon Linux 2 users, see below): https://docs.influxdata.com/telegraf/latest/introduction/installation/ Note for Amazon Linux 2 To install Telegraph on Amazon Linux 2, you may use InfluxData\u0026rsquo;s RHEL 7 yum repo as follows:\ncat \u0026lt;\u0026lt;EOF | sudo tee /etc/yum.repos.d/influxdb.repo [influxdb] name = InfluxDB Repository - RHEL 7 baseurl = https://repos.influxdata.com/rhel/7/\\$basearch/stable enabled = 1 gpgcheck = 1 gpgkey = https://repos.influxdata.com/influxdb.key EOF If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"},{"uri":"/10_klaytn_installation/20_system_requirement/","title":"System Requirement","tags":[],"description":"","content":"\n1. System Requirement (for cloud) Recommended Specification for AWS\nNode Type Model vCPU Memory (GiB) Storage size (GiB) Storage speed (IOPS) Price (Seoul region, USD/h) CN c5.18xlarge 72 144 3,000 (Minimum) 3,000 (Minimum) 3.456 PN m5.8xlarge 32 128 3,000 (Minimum) 3,000 (Minimum) 1.888 Recommended Specification for Azure\nNode Type Model vCPU Memory (GiB) Storage size (GiB) Storage speed (IOPS) Price (Seoul Central, USD/h) CN F72s v2 72 144 P50 (4096) 7500 3.456 PN D32s v5 32 128 P50 (4096) 7500 1.625 If you would like to check the detailed requirements or use an on-premise server, please refer to the link below.\nhttps://docs.klaytn.foundation/node/core-cell/system-requirements If you finish check requirements, please click the next button \u0026gt; on the right side of this page.\n"},{"uri":"/20_klaytn_configuration/20_init_genesis_block/","title":"Init Genesis Block","tags":[],"description":"","content":"\n4. Copy genesis.json under DATA directory example : /var/kcnd/data/genesis.json\n5. Init Genesis block 1) CN configuration $ kcn --networkid 7207 init --datadir /var/kcnd/data genesis.json 2) PN configuration $ kpn --networkid 7207 init --datadir /var/klaytn/kpnd/data genesis.json 6. (ONLY PN) Create static-nodes.json and copy it under DATA directory example : /var/kcnd/data/nodekey\n** Generate static-nodes.json ** You have 1 CN and 2 PNs, each are cn1, pn1, pn2. 1. static-nodes.json in pn1 [ \u0026#34;CN_KNI_ADDRESS@CN_INTERNAL_IP:PORT?discport=0\u0026amp;ntype=cn\u0026#34;, \u0026#34;PN2_KNI_ADDRESS@PN2_INTERNAL_IP:PORT?discport=0\u0026amp;ntype=pn\u0026#34; ] 2. static-nodes.json in pn2 [ \u0026#34;CN_KNI_ADDRESS@CN_INTERNAL_IP:PORT?discport=0\u0026amp;ntype=cn\u0026#34;, \u0026#34;PN1_KNI_ADDRESS@PN1_INTERNAL_IP:PORT?discport=0\u0026amp;ntype=pn\u0026#34; ] You can check the more information for installation on the page below..\nCN : https://docs.klaytn.foundation/node/core-cell/installation-guide/consensus-node-setup/configuration PN : https://docs.klaytn.foundation/node/core-cell/installation-guide/proxy-node-setup/configuration If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"},{"uri":"/20_klaytn_configuration/","title":"Klaytn Configuration","tags":[],"description":"","content":"Chapter 2 Configuration In this chapter, you will set the Pre-cypress network configuration. Please click the next button \u0026gt; on the right side of this page.\n"},{"uri":"/40_start_the_services/20_check_the_services/","title":"Check the services","tags":[],"description":"","content":"\n3. Watch the service log to confirm if your nodes are correctly joined. If the node is not a proposer at that block, and the consensus is successful, the node have executed(==validates) the block. In other words, a block is inserted.\n1) For CN, $ tail \u0026lt;your_klaytn_home_path\u0026gt;/kcnd/log/kcnd.out INFO Inserted a new block number=14 hash=13cbfc…f007fc txs=0 gas=0 elapsed=793.458µs processTxs=167ns finalize=157.708µs validateState=7.542µs totalWrite=443.417µs trieWrite=256.667µs 2) For PN, $ tail \u0026lt;your_klaytn_home_path\u0026gt;/kcnd/log/kpnd.out INFO Inserted a new block number=14 hash=13cbfc…f007fc txs=0 gas=0 elapsed=793.458µs processTxs=167ns finalize=157.708µs validateState=7.542µs totalWrite=443.417µs trieWrite=256.667µs You can check the more details requirements on the page below.\nhttps://docs.klaytn.foundation/node/node-log#info-logs If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"},{"uri":"/30_monitoring_setup/20_telegraf_configuration/","title":"Telegraf Configuration","tags":[],"description":"","content":"\n2. Enable monitoring in kcnd/kpnd Check the if below two options enabled\n/etc/kcnd/conf/kcnd.conf\n... METRICS=1 PROMETHEUS=1 ... If two options enabled, You may check port 61001 is open.\n$ netstat -ntap | grep 61001 tcp 0 0 :::61001 :::* LISTEN 8989/kcn 3. Configure Telegraf service Create new telegraf configuration and add the following the configuration file might be located in\n/etc/telegraf/telegraf.d/\nEdit \u0026rsquo;nodetype\u0026rsquo;, \u0026lsquo;instance\u0026rsquo;, and \u0026lsquo;hostname\u0026rsquo; appropriately for each node\n[global_tags] # Change \u0026#34;cn\u0026#34; to \u0026#34;pn\u0026#34; for PN installation nodetype = \u0026#34;cn\u0026#34; # The CN/PN name (e.g. `example-cn`, `example-pn`) instance = \u0026#34;\u0026lt;hostname\u0026gt;\u0026#34; [agent] # The CN/PN name (e.g. `example-cn`, `example-pn`) hostname = \u0026#34;\u0026lt;hostname\u0026gt;\u0026#34; [outputs.influxdb] urls = [ \u0026#34;http://13.125.193.171:45560\u0026#34; ] database = \u0026#34;klaytn\u0026#34; [inputs.prometheus] urls = [ \u0026#34;http://localhost:61001/metrics\u0026#34; ] The influxdb information for pre-cypress will be provided separately.\nYou can check the more details requirements on the page below.\nhttps://docs.klaytn.foundation/node/core-cell/monitoring-setup If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"},{"uri":"/10_klaytn_installation/30_klaytn_package_installation/","title":"Package Installation","tags":[],"description":"","content":"\n1. Linux Archive Distribution The archive file consists of the executable binary and the configuration file structured as follows.\nFor CN node : kcn / kcnd For PN node : kpn / kpnd - bin |- kcn |- kcnd - conf |- kcnd.conf File Name | File Description -------------------------------------------------------- bin/kcn | CN executable file bin/kcnd | CN start/termination script file conf/kcnd.conf | CN configuration file Do NOT alter the file structure or file name. If you change it, the node may not function correctly.\nInstallation The installation is the uncompression of the downloaded package where you want to install the package.\n$ tar zxf kcn-vX.X.X-linux-amd64.tar.gz or $ tar zxf kcn-baobab-vX.X.X-linux-amd64.tar.gz it is recommended that the uncompressed directory kcn-linux-amd64/bin path should be added to the environment variable $PATH to run the kcn and kcnd globally. As an example,\n$ export PATH=$PATH:~/downloaded/path/kcn-linux-amd64/bin The other sections assume that the path is added to the variable.\n2. RPM Distribution (RHEL/CentOS/Fedora) Install downloaded RPM You can install the downloaded RPM file with the following yum command.\n1) CN Installation $ yum install kcnd-vX.X.X.el7.x86_64.rpm or $ yum install kcnd-baobab-vX.X.X.el7.x86_64.rpm 2) PN Installation $ yum install kpnd-vX.X.X.el7.x86_64.rpm or $ yum install kpnd-baobab-vX.X.X.el7.x86_64.rpm Install from Klaytn Yum Repo Alternatively, you can install from the Klaytn Yum repo, run:\n1) CN Installation sudo curl -o /etc/yum.repos.d/klaytn.repo https://packages.klaytn.net/config/rhel/7/prod.repo \u0026amp;\u0026amp; sudo yum install kcnd 2) PN Installation sudo curl -o /etc/yum.repos.d/klaytn.repo https://packages.klaytn.net/config/rhel/7/prod.repo \u0026amp;\u0026amp; sudo yum install kpnd Installed Location The installed files are located as follows. (The PN node is also in the same location.)\nFile Name | Location ------------------------------------------- kcnd.conf | /etc/kcnd/conf/kcnd.conf You can check the more details information on the page below.\nCN : https://docs.klaytn.foundation/node/core-cell/installation-guide/consensus-node-setup/installation-guide PN : https://docs.klaytn.foundation/node/core-cell/installation-guide/proxy-node-setup/installation-guide If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"},{"uri":"/30_monitoring_setup/","title":"Monitoring Setup","tags":[],"description":"","content":"Chapter 3 Monitoring Setup Install telegraf for monitoring. Please click the next button \u0026gt; on the right side of this page.\n"},{"uri":"/40_start_the_services/","title":"Start the services","tags":[],"description":"","content":"Chapter 4 Start the services Now, we are ready to start Pre-Cypress service. Please click the next button \u0026gt; on the right side of this page.\n"},{"uri":"/50_conclusion/","title":"Conclusion","tags":[],"description":"","content":"\nCongratulations! Now, you are playing in the Pre-Cypress network. "},{"uri":"/","title":"Klaytn - CCO Onboarding - Pre-cypress","tags":[],"description":"","content":"\nCCO Onboarding - Pre-cypress This online instruction let you join Klaytn Pre-cypress network.\n"},{"uri":"/categories/","title":"Categories","tags":[],"description":"","content":""},{"uri":"/tags/","title":"Tags","tags":[],"description":"","content":""}]